<?xml version="1.0" encoding="utf-8"?>
<com.google.android.material.card.MaterialCardView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools" android:layout_width="match_parent" android:layout_height="wrap_content" android:layout_margin="24dp" app:cardCornerRadius="28dp" app:cardElevation="8dp" android:backgroundTint="@color/card_background">

    <androidx.constraintlayout.widget.ConstraintLayout android:layout_width="match_parent" android:layout_height="wrap_content" android:padding="24dp">

        <!-- Loading State Container -->
        <androidx.constraintlayout.widget.ConstraintLayout android:id="@+id/loadingLayout" android:layout_width="match_parent" android:layout_height="wrap_content" android:visibility="visible" app:layout_constraintTop_toTopOf="parent" app:layout_constraintBottom_toBottomOf="parent">

            <TextView android:id="@+id/statusTitle" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="@string/share_receiver_title" android:textAppearance="?attr/textAppearanceTitleLarge" android:textColor="?attr/colorPrimary" android:textStyle="bold" app:layout_constraintTop_toTopOf="parent" app:layout_constraintStart_toStartOf="parent" app:layout_constraintEnd_toEndOf="parent" />

            <com.google.android.material.progressindicator.LinearProgressIndicator android:id="@+id/progressBar" android:layout_width="match_parent" android:layout_height="wrap_content" android:layout_marginTop="24dp" android:indeterminate="true" app:indicatorColor="@color/keet_green" app:trackCornerRadius="4dp" app:layout_constraintTop_toBottomOf="@id/statusTitle" />

            <TextView android:id="@+id/statusText" android:layout_width="match_parent" android:layout_height="wrap_content" android:layout_marginTop="16dp" android:gravity="center" android:text="@string/processing" android:textAppearance="?attr/textAppearanceBodyMedium" android:textColor="@color/text_secondary" app:layout_constraintTop_toBottomOf="@id/progressBar" app:layout_constraintBottom_toBottomOf="parent" />
        </androidx.constraintlayout.widget.ConstraintLayout>

        <!-- Error State Container -->
        <androidx.constraintlayout.widget.ConstraintLayout android:id="@+id/errorLayout" android:layout_width="match_parent" android:layout_height="wrap_content" android:visibility="gone" app:layout_constraintTop_toTopOf="parent" app:layout_constraintBottom_toBottomOf="parent">

            <ImageView android:id="@+id/ivError" android:layout_width="48dp" android:layout_height="48dp" android:contentDescription="@null" android:src="@drawable/ic_error" app:tint="@color/design_default_color_error" app:layout_constraintTop_toTopOf="parent" app:layout_constraintStart_toStartOf="parent" app:layout_constraintEnd_toEndOf="parent" />

            <TextView android:id="@+id/tvErrorTitle" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_marginTop="16dp" android:text="@string/error" android:textAppearance="?attr/textAppearanceTitleMedium" android:textColor="@color/text_primary" android:textStyle="bold" app:layout_constraintTop_toBottomOf="@id/ivError" app:layout_constraintStart_toStartOf="parent" app:layout_constraintEnd_toEndOf="parent" />

            <TextView android:id="@+id/tvErrorMessage" android:layout_width="match_parent" android:layout_height="wrap_content" android:layout_marginTop="8dp" android:gravity="center" android:textColor="@color/text_secondary" app:layout_constraintTop_toBottomOf="@id/tvErrorTitle" tools:text="Something went wrong during transcription." />

            <com.google.android.material.button.MaterialButton android:id="@+id/btnCloseError" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_marginTop="24dp" android:text="@string/close" style="@style/Widget.Material3.Button.TonalButton" app:layout_constraintTop_toBottomOf="@id/tvErrorMessage" app:layout_constraintStart_toStartOf="parent" app:layout_constraintEnd_toEndOf="parent" app:layout_constraintBottom_toBottomOf="parent" />
        </androidx.constraintlayout.widget.ConstraintLayout>

        <!-- Result State Container -->
        <androidx.constraintlayout.widget.ConstraintLayout android:id="@+id/resultLayout" android:layout_width="match_parent" android:layout_height="wrap_content" android:visibility="gone" app:layout_constraintTop_toTopOf="parent" app:layout_constraintBottom_toBottomOf="parent">

            <TextView android:id="@+id/tvResultTitle" android:layout_width="0dp" android:layout_height="wrap_content" android:text="@string/transcription_result" android:textColor="@color/text_primary" android:textSize="22sp" android:textStyle="bold" app:layout_constraintStart_toStartOf="parent" app:layout_constraintEnd_toStartOf="@id/btnClose" app:layout_constraintTop_toTopOf="parent" />

            <ImageButton android:id="@+id/btnClose" android:layout_width="32dp" android:layout_height="32dp" android:contentDescription="@string/close_button" android:background="?attr/selectableItemBackgroundBorderless" android:src="@drawable/ic_close" app:tint="@color/text_secondary" app:layout_constraintEnd_toEndOf="parent" app:layout_constraintTop_toTopOf="@id/tvResultTitle" app:layout_constraintBottom_toBottomOf="@id/tvResultTitle"/>

            <androidx.core.widget.NestedScrollView android:id="@+id/contentScroll" android:layout_width="match_parent" android:layout_height="wrap_content" android:layout_marginTop="20dp" app:layout_constrainedHeight="true" app:layout_constraintHeight_max="400dp" app:layout_constraintTop_toBottomOf="@id/tvResultTitle">

                <TextView android:id="@+id/tvResultContent" android:layout_width="match_parent" android:layout_height="wrap_content" android:textColor="@color/text_primary" android:textSize="17sp" android:lineSpacingExtra="6dp" android:paddingBottom="8dp" tools:text="This is the transcribed text showing up here with dynamic height." />

            </androidx.core.widget.NestedScrollView>

            <LinearLayout android:id="@+id/buttonLayout" android:layout_width="match_parent" android:layout_height="wrap_content" android:orientation="horizontal" android:layout_marginTop="20dp" app:layout_constraintTop_toBottomOf="@id/contentScroll" app:layout_constraintBottom_toBottomOf="parent">

                <com.google.android.material.button.MaterialButton android:id="@+id/btnCopy" android:layout_width="0dp" android:layout_height="60dp" android:layout_weight="1" android:text="@string/copy" android:textSize="16sp" android:textStyle="bold" android:textColor="@color/keet_green" style="@style/Widget.Material3.Button.OutlinedButton" app:strokeColor="@color/keet_green" app:strokeWidth="2dp" app:cornerRadius="30dp" app:icon="@drawable/ic_content_copy" app:iconGravity="textStart" app:iconTint="@color/keet_green" />

                <View android:layout_width="16dp" android:layout_height="1dp" />

                <com.google.android.material.button.MaterialButton android:id="@+id/btnShare" android:layout_width="0dp" android:layout_height="60dp" android:layout_weight="1" android:text="@string/share" android:textSize="16sp" android:textStyle="bold" android:textColor="@color/white" app:backgroundTint="@color/keet_green" app:cornerRadius="30dp" app:icon="@drawable/ic_share" app:iconGravity="textStart" app:iconTint="@color/white" />

            </LinearLayout>

        </androidx.constraintlayout.widget.ConstraintLayout>

    </androidx.constraintlayout.widget.ConstraintLayout>

</com.google.android.material.card.MaterialCardView>
